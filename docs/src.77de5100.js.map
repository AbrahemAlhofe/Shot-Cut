{"version":3,"sources":["utils.ts","shots.ts","index.ts"],"names":[],"mappings":";;;;;ACAA,IAAM,IAAI,GAAqB,QAAQ,CAAC,aAAT,CAAuB,cAAvB,CAA/B;;AAEA,ADFA,ICEA,KAAA,ADFgB,UAAhB,CACI,OADJ,EAEI,SAFJ,EAGI,SAHJ,EAII,OAJJ,EAIoC;ACFpC,ADIE,MAAI,OAAO,GAAG;ACJhB,ADIkB,IAAA,CAAC,EAAG,CAAN,ICJhB;AAII,ADAqB,IAAA,CAAC,EAAG,ICAzB,KAAA,GAAA;AACI,ADDQ,GAAd,MCCW,YAAL,GAAoB,QAAQ,CAAC,aAAT,CAAuB,cAAvB,CAApB;ACPR,ADQK,ADAH,IERF,EFQM,KERN,GAAA,CFQe,GAAG,GERlB,CAAA,CFQE,QERF,CAAA;AFSE,MAAI,WAAW,GAAG,KAAlB;AERF,ADSI,ADAF,ECAE,ECTJ,EFSM,CCAF,CAAA,GCTJ,GAAA,GDSI,ADAa,CCAb,EDAgB,ECAhB,GAAA,ADAF,IETF,CAAA,KDSU,ECTV,CAAA,EDSI,EAA6B,KCTjC,CAAA,CAAA;AAEA,ADQQ,ADCN,EAAA,OAAO,CAAC,gBAAR,CAAyB,WAAzB,EAAsC,UAAC,CAAD,EAAc;AAClD,IAAA,OAAO,CAAC,GAAR,CAAa,SAAS,CAAC,CAAD,CAAtB;;ACCI,ADAJ,QCAU,ADAL,MCAW,GAAG,ADAL,CAAC,CAAD,CAAd,EAAoB,GCAO,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,ADAF,MAAA,ECAQ,OAAO,EDAJ,CCAO,EDAJ,ICAU,ADAxB,CCAyB,UAAP,CAAkB,IAAlB,CAAhB;ACTR,ADWQ,ADDF,IEVA,EFUA,ECCQ,ECXF,GAAgB,EFUb,GAAG,CCCO,ECXW,CAAC,ADWT,CAApB,ADDF,YEVsB,CAAuB,SAAvB,CAA5B;AACA,ADYQ,ADFF,IEVA,ADYE,EDFF,ICEQ,CCZD,ADYE,EDFF,CEVgB,EDYrB,ADFQ,GCEO,GCZc,CAAC,ADYX,CAAC,WAAL,CCZM,CAAuB,CDYV,SCZb,CAA7B,CDYQ;ACXR,ADaQ,ADJU,IETZ,ADaE,ICbE,AFSQ,CAAC,CCIL,CCbiB,ADahB,ADJM,CAAC,CAAC,ICIf,CDJQ,CETuB,CAAC,ADahB,IAAI,CAAC,QCbE,CAAuB,GDa9B,GAAoB,QCbb,CAA/B,EDaQ;ACZR,ADcQ,ADNsB,IERxB,ADcE,IDNsB,CAAC,CERnB,CDcG,ADNkB,CCMjB,ADNkB,CERN,AFQO,QERC,ADc5B,CCd6B,ADezB,KADJ,EAEI,IAAI,CAAC,CChBW,CAAuB,QAAvB,CAA5B,EDgBY,CAAmB,GAAnB,IAA0B,WAF9B,EAGI,IAAI,CAAC,aAAL,CAAmB,GAAnB,IAA0B,WAH9B,EAII,MAAM,CAAC,KAAP,GAAe,KAJnB,EAKI,MAAM,CAAC,MAAP,GAAgB,KALpB;ACbR,ADqBQ,ADdQ,IEPV,GFOA,MEPS,GAAsB,QAAQ,CAAC,aAAT,CAAuB,mBAAvB,CAArC;AACA,AFOK,IEPC,QAAQ,GAAgB,QAAQ,CAAC,aAAT,CAAuB,qBAAvB,CAA9B;AACA,AFOG,GAPD,CEAI,UAAU,GAAgB,QAAQ,CAAC,aAAT,CAAuB,mBAAvB,CAAhC;AACA,AFQE,EAAA,EERI,MFQI,CAAC,EERI,EFQb,CERmC,AFQrB,QER6B,CAAC,OFQ5C,CAA+B,KERI,CAAuB,GFQ1D,EAA0C,IERP,CAArC,KFQ6C,CAAD,EAAc;AEc1D,ADDQ,ADXJ,MEYE,CAAC,CDDO,ADXL,IEYT,ADDkB,GCCC,ADDE,IDXD,GEYM,CAAC,ADDE,ADXL,CCWM,UDX1B,CEYe,CFZmB,CCWjB,CCCqB,ADDE,CCC3B,GAAiC,CDD7B,CAAb,ICCgD,CAAC,YAAP,GAAsB,CAAxE;AACA,ADDQ,ADXF,ICWE,ECCF,AFZA,CEYC,CDDK,CAAC,GCCb,GAAe,AFZA,CEYf,EDDQ,ADXU,CCWK,GAAf,ADXF,CCWqB,MAAnB,EAzByB,CA2BzB;ACAR,AFZM,MEYA,AFZA,CEYC,MFZM,CAAC,CAAD,CAAP,OEYN,GAA0B,CAA1B;AACA,ADAQ,ADZH,ICYG,ECAF,CAAC,CDAK,CAAC,WAAL,CAAkB,CCA1B,GAAyB,EDAjB,CCAR;AAEA,ADAQ,ADZL,GAPD,GEmBI,CAAC,EDAM,ECAb,GAAc,ODAN,CAAkB,WAAlB,CAA+B,IAA/B;ACCJ,ADAC,ADXH,EEWE,AFXF,CCpBE,OC+BQ,AFXF,CAAC,CEWI,GFXb,CAAc,gBAAd,CAA+B,WAA/B,EA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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["export function onDragDrop (\r\n    element,\r\n    mousedown: (e: MouseEvent) => void | boolean,\r\n    mousemove: (e: MouseEvent, position? : { x : number, y: number }) => any,\r\n    mouseup: (e: MouseEvent) => void\r\n) {\r\n  let point_1 = { x : 0, y : 0 }\r\n\r\n  let isMouseUp = false\r\n  let isMouseDown = false\r\n  let isMouseMove = false\r\n\r\n  element.addEventListener(\"mousedown\", (e: MouseEvent) => {\r\n    console.log( mousedown(e) )\r\n    if ( mousedown(e) ) {\r\n      isMouseDown = true\r\n      isMouseUp = false\r\n      point_1 = { x: e.pageX, y: e.pageY };\r\n    }\r\n  });\r\n\r\n  document.body.addEventListener(\"mouseup\", (e: MouseEvent) => {\r\n\r\n    if ( isMouseDown && isMouseMove ) {\r\n      isMouseUp = true;\r\n      mouseup(e);\r\n    }\r\n\r\n  });\r\n\r\n  document.body.addEventListener(\"mousemove\", (e: MouseEvent) => {\r\n    if ( !isMouseUp && isMouseDown ) {\r\n      isMouseMove = true\r\n      mousemove(e, { x: e.pageX - point_1.x, y: e.pageY - point_1.y });\r\n    }\r\n  });\r\n\r\n}\r\n\r\nexport function absMax(num: number, limit: number): number {\r\n  limit = limit * (num < 0 ? -1 : 1);\r\n  return Math.abs(num) > Math.abs(limit) ? limit : num;\r\n}\r\n\r\nexport function compute< T extends Object >( data: T, handler: ( this: T ) => void): () => T | T {\r\n    return new Proxy(() => data, {\r\n      set (target, key, value) {\r\n        target()[key] = value\r\n        return true\r\n      },\r\n      get (target, key) { return target()[key] },\r\n      apply ( target ) {\r\n        handler.apply(target());\r\n        return target()\r\n      }\r\n    })\r\n\r\n}\r\n\r\nexport function inRange (num: number, min: number, max: number) {\r\n  if ( num < min ) return min\r\n  if ( num > max ) return max\r\n  return num\r\n}\r\n\r\nexport interface IPosition { x : number, y : number }","const View: HTMLImageElement = document.querySelector(\".view__image\");\r\n\r\nexport default class Shots {\r\n\r\n    ShotsElement: HTMLElement\r\n\r\n    constructor () {\r\n        this.ShotsElement = document.querySelector('.shots-stack')\r\n    }\r\n\r\n    push (image: HTMLImageElement): void {\r\n        /*\r\n            Create Canvas\r\n        */\r\n        const canvas = document.createElement(\"canvas\");\r\n        const context = canvas.getContext(\"2d\");\r\n\r\n        const aspectRatio = 2;\r\n        \r\n        canvas.width = View.offsetWidth / aspectRatio;\r\n        \r\n        canvas.height = View.offsetHeight / aspectRatio;\r\n\r\n        context.drawImage(\r\n            image,\r\n            data.ImagePosition[\"x\"] / aspectRatio,\r\n            data.ImagePosition[\"y\"] / aspectRatio,\r\n            canvas.width * SCALE,\r\n            canvas.height * SCALE\r\n        );\r\n\r\n        /*\r\n            Create Shot\r\n        */\r\n        const Shot = document.createElement(\"div\");\r\n        Shot.classList.add(\"shot\");\r\n\r\n        // Childrens\r\n        Shot.appendChild( canvas );\r\n\r\n        this.ShotsElement.appendChild( Shot );\r\n    }\r\n\r\n}","import { onDragDrop, absMax, compute, inRange, IPosition } from \"./utils\";\r\nimport Shots from \"./shots\";\r\n\r\n/* ===========\r\n    Elements\r\n============== */\r\nconst Cursor: HTMLElement = document.querySelector('.cursor')\r\nconst Pointer: HTMLElement = document.querySelector('.pointer')\r\nconst View: HTMLImageElement = document.querySelector('.view__image')\r\nconst Button: HTMLElement = document.querySelector('button')\r\nconst UploadBtn: HTMLButtonElement = document.querySelector('.view__upload-btn')\r\nconst Zoom_Bar: HTMLElement = document.querySelector('.view__zoom-bar div')\r\nconst Zoom_Value: HTMLElement = document.querySelector(\".view__zoom-value\");\r\nconst InputFile : HTMLInputElement = document.querySelector('#upload')\r\n\r\n/* ===========\r\nData\r\n============== */\r\ndeclare global {\r\n    var SCALE : number\r\n    var LIMIT : number\r\n    var MAX_ASPECT_RATIO : number\r\n    var MAX_IMAGE_WIDTH : number\r\n    var data : {\r\n        Distance : IPosition,\r\n        isCursorMove : boolean,\r\n        CursorPosition : () => IPosition | IPosition,\r\n        ImagePosition : () => IPosition | IPosition,\r\n        ImageWidth : number,\r\n        ImageHeight : number,\r\n        ImageSrc : string,\r\n        ImageAspectRatio : number\r\n    }\r\n}\r\n\r\nwindow.LIMIT = ( ( Pointer.offsetHeight / 2 ) - ( Cursor.offsetHeight / 2 ) )\r\nwindow.SCALE = 3\r\nwindow.MAX_ASPECT_RATIO = 2\r\nwindow.MAX_IMAGE_WIDTH = 600\r\n\r\nwindow.data = {\r\n    Distance : { x : 0, y : 0 },\r\n    isCursorMove : false,\r\n    CursorPosition : compute({ x : 0, y : 0 }, function () {\r\n        this.x = absMax(data.Distance[\"x\"], LIMIT);\r\n        this.y = absMax(data.Distance[\"y\"], LIMIT);\r\n    }),\r\n    ImagePosition : compute({ x : 0, y : 0 }, () => {}),\r\n    ImageWidth : 0,\r\n    ImageHeight : 0,\r\n    ImageSrc : window.getComputedStyle(View).backgroundImage.slice(5, window.getComputedStyle(View).backgroundImage.length - 2),\r\n    ImageAspectRatio : 0\r\n}\r\n\r\n/* ===========\r\n    Logic\r\n============== */\r\n\r\nfunction updateView (): void {\r\n\r\n    Cursor.style.transform = `translate(${ data.CursorPosition['x'] }px, ${ data.CursorPosition['y'] }px)`\r\n\r\n    View.style.backgroundPosition = `${ data.ImagePosition['x'] }px ${ data.ImagePosition['y'] }px`\r\n    \r\n    if ( data.isCursorMove ) View.classList.add(\"image--move\");\r\n    else View.classList.remove(\"image--move\");\r\n\r\n    if ( data.isCursorMove ) Cursor.classList.add('cursor--move')\r\n    else Cursor.classList.remove('cursor--move')\r\n\r\n    View.style.backgroundImage = `url(${ data.ImageSrc })`\r\n\r\n    View.style.backgroundSize = `${ View.offsetWidth * SCALE }px ${ View.offsetHeight * SCALE }px`\r\n\r\n    Zoom_Bar.style.width = `${ SCALE / 5 * 100 }%`\r\n\r\n    Zoom_Bar.style.backgroundImage = `linear-gradient(45deg, #FF5722 ${ 100 - ( SCALE / 5 * 100 ) }%, #FFC107)`;\r\n\r\n    Zoom_Value.innerText = `${ SCALE }00%`\r\n}\r\n\r\nvar interval: number;\r\n\r\nfunction mousedown (e: MouseEvent) { return true }\r\n\r\nfunction mousemove (e: MouseEvent, { x, y }) {\r\n    data.isCursorMove = true\r\n\r\n    let distance = Math.sqrt( ( x ** 2 ) + ( y ** 2 ) )\r\n    \r\n    data.Distance['x'] = x\r\n\r\n    data.Distance['y'] = y\r\n\r\n    if ( distance > LIMIT && interval === undefined ) {\r\n\r\n        interval = setInterval( () => {\r\n\r\n            data.ImagePosition()\r\n\r\n            updateView();\r\n\r\n        }, 1000 / 24 )\r\n\r\n    }\r\n\r\n    data.CursorPosition()\r\n\r\n    data.ImagePosition();\r\n\r\n    updateView()\r\n}\r\n\r\nfunction mouseup() {\r\n    data.CursorPosition['x'] = 0\r\n    data.CursorPosition['y'] = 0\r\n    \r\n    clearInterval( interval )\r\n    interval = undefined\r\n    updateView();\r\n}\r\n\r\nonDragDrop( Cursor, mousedown, mousemove, mouseup )\r\n\r\nconst img: HTMLImageElement = new Image()\r\n\r\nimg.onload = () => {\r\n    data.ImageWidth = img.naturalWidth \r\n    data.ImageHeight = img.naturalHeight;\r\n    data.ImageAspectRatio = data.ImageWidth / data.ImageHeight\r\n\r\n    let height = 300 // You can specify the value what do you want\r\n\r\n    if ( data.ImageAspectRatio > MAX_ASPECT_RATIO ) height = MAX_IMAGE_WIDTH / data.ImageAspectRatio\r\n\r\n    View.style.height = `${ height }px`;\r\n    View.style.width = `${ height * data.ImageAspectRatio }px`\r\n    \r\n    data.ImagePosition = compute(\r\n      {\r\n        x: (View.offsetWidth - View.offsetWidth * SCALE) * 0.5,\r\n        y: (View.offsetHeight - View.offsetHeight * SCALE) * 0.5,\r\n      },\r\n      function () {\r\n        let x = this.x + absMax(data.Distance[\"x\"], 5) * -1;\r\n        let y = this.y + absMax(data.Distance[\"y\"], 5) * -1;\r\n\r\n        this.x = inRange(x, View.offsetWidth * ( SCALE * -1 ) + View.offsetWidth, 0);\r\n\r\n        this.y = inRange(y, View.offsetHeight * ( SCALE * -1 ) + View.offsetHeight, 0);\r\n      }\r\n    );\r\n\r\n    updateView()\r\n}\r\n\r\nimg.src = data.ImageSrc\r\n\r\nconst shots = new Shots()\r\nButton.addEventListener('click', () => shots.push( img ))\r\n\r\nUploadBtn.addEventListener('click', () => {\r\n    InputFile.click()\r\n    InputFile.addEventListener('change', (e) => {\r\n        const image: File = InputFile.files[0]\r\n        const reader = new FileReader()\r\n\r\n        reader.addEventListener(\"load\", function () {\r\n            data.ImageSrc = this.result.toString()\r\n            img.src = this.result.toString()\r\n            updateView()\r\n        });\r\n\r\n        reader.readAsDataURL(image);\r\n\r\n        console.log(image)\r\n    })\r\n})\r\n\r\nonDragDrop(Zoom_Bar,\r\n    // Mouse Down\r\n    (e) => {\r\n        let start = Zoom_Bar.getBoundingClientRect().left + Zoom_Bar.offsetWidth - 100;\r\n        return e.pageX > start\r\n    },\r\n    // Mouse Move\r\n    (e) => {\r\n        let unit = Zoom_Bar.parentElement.offsetWidth / 5\r\n        let x = e.pageX - Zoom_Bar.getBoundingClientRect().left\r\n\r\n        SCALE = Math.round( x / unit )\r\n        console.log( x, x / unit )\r\n        updateView()\r\n    },\r\n    // Mouse Up\r\n    () => {\r\n\r\n    }\r\n)"]}