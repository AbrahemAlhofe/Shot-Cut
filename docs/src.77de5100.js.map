{"version":3,"sources":["utils.ts","index.ts"],"names":[],"mappings":"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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["export function onDragDrop (\r\n    element,\r\n    mousedown: (e: MouseEvent) => void,\r\n    mousemove: (e: MouseEvent, position? : { x : number, y: number }) => any,\r\n    mouseup: (e: MouseEvent) => void\r\n) {\r\n  let point_1 = { x : 0, y : 0 }\r\n\r\n  let isMouseUp = false\r\n  let isMouseDown = false\r\n  let isMouseMove = false\r\n\r\n  element.addEventListener(\"mousedown\", (e: MouseEvent) => {\r\n    isMouseDown = true\r\n    isMouseUp = false\r\n    point_1 = { x: e.pageX, y: e.pageY };\r\n    mousedown(e);\r\n  });\r\n\r\n  document.body.addEventListener(\"mouseup\", (e: MouseEvent) => {\r\n\r\n    if ( isMouseDown && isMouseMove ) {\r\n      isMouseUp = true;\r\n      mouseup(e);\r\n    }\r\n\r\n  });\r\n\r\n  document.body.addEventListener(\"mousemove\", (e: MouseEvent) => {\r\n    if ( !isMouseUp && isMouseDown ) {\r\n      isMouseMove = true\r\n      mousemove(e, { x: e.pageX - point_1.x, y: e.pageY - point_1.y });\r\n    }\r\n  });\r\n\r\n}\r\n\r\nexport function absMax(num: number, limit: number): number {\r\n  limit = limit * (num < 0 ? -1 : 1);\r\n  return Math.abs(num) > Math.abs(limit) ? limit : num;\r\n}\r\n\r\nexport function compute< T extends Object >( data: T, handler: ( this: T ) => void): any {\r\n    console.log(data)\r\n    return new Proxy(() => data, {\r\n      set (target, key, value) {\r\n        target()[key] = value\r\n        return true\r\n      },\r\n      get (target, key) { return target()[key] },\r\n      apply ( target ) {\r\n        handler.apply(target());\r\n        return target()\r\n      }\r\n    })\r\n\r\n}\r\n\r\nexport function inRange (num: number, min: number, max: number) {\r\n  if ( num < min ) return min\r\n  if ( num > max ) return max\r\n  return num\r\n}","import { onDragDrop, absMax, compute, inRange } from \"./utils\";\r\n\r\n/* ===========\r\n    Elements\r\n============== */\r\nconst Cursor: HTMLElement = document.querySelector('.cursor')\r\nconst Pointer: HTMLElement = document.querySelector('.pointer')\r\nconst Img: HTMLImageElement = document.querySelector('.view__image')\r\nconst Button: HTMLElement = document.querySelector('button')\r\nconst ShotsStack: HTMLElement = document.querySelector('.shots-stack')\r\nconst UploadBtn: HTMLButtonElement = document.querySelector('.view__upload-btn')\r\nconst InputFile : HTMLInputElement = document.querySelector('#upload')\r\n\r\n/* ===========\r\nData\r\n============== */\r\nconst LIMIT: number = ( ( Pointer.offsetHeight / 2 ) - ( Cursor.offsetHeight / 2 ) )\r\nconst SCALE: number = 5\r\nconst MAX_ASPECT_RATIO: number = 2\r\nconst MAX_IMAGE_WIDTH: number = 600\r\n\r\nconst data = {\r\n    Distance : { x : 0, y : 0 },\r\n    isCursorMove : false,\r\n    CursorPosition : compute({ x : 0, y : 0 }, function () {\r\n        this.x = absMax(data.Distance[\"x\"], LIMIT);\r\n        this.y = absMax(data.Distance[\"y\"], LIMIT);\r\n    }),\r\n    ImagePosition : compute({ x : 0, y : 0 }, () => {}),\r\n    ImageWidth : 0,\r\n    ImageHeight : 0,\r\n    ImageSrc : window.getComputedStyle(Img).backgroundImage.slice(5, window.getComputedStyle(Img).backgroundImage.length - 2),\r\n    ImageAspectRatio : 0\r\n}\r\n\r\n/* ===========\r\n    Logic\r\n============== */\r\n\r\nfunction updateView (): void {\r\n\r\n    Cursor.style.transform = `translate(${ data.CursorPosition['x'] }px, ${ data.CursorPosition['y'] }px)`\r\n\r\n    Img.style.backgroundPosition = `${ data.ImagePosition['x'] }px ${ data.ImagePosition['y'] }px`\r\n    \r\n    if ( data.isCursorMove ) Img.classList.add(\"image--move\");\r\n    else Img.classList.remove(\"image--move\");\r\n\r\n    if ( data.isCursorMove ) Cursor.classList.add('cursor--move')\r\n    else Cursor.classList.remove('cursor--move')\r\n\r\n    Img.style.backgroundImage = `url(${ data.ImageSrc })`\r\n\r\n    Img.style.backgroundSize = `${ Img.offsetWidth * SCALE }px ${ Img.offsetHeight * SCALE }px`\r\n\r\n}\r\n\r\nvar interval: number;\r\n\r\nfunction mousedown (e: MouseEvent) {}\r\n\r\nfunction mousemove (e: MouseEvent, { x, y }) {\r\n    data.isCursorMove = true\r\n\r\n    let distance = Math.sqrt( ( x ** 2 ) + ( y ** 2 ) )\r\n    \r\n    data.Distance['x'] = x\r\n\r\n    data.Distance['y'] = y\r\n\r\n    if ( distance > LIMIT && interval === undefined ) {\r\n\r\n        interval = setInterval( () => {\r\n\r\n            data.ImagePosition()\r\n\r\n            updateView();\r\n\r\n        }, 1000 / 24 )\r\n\r\n    }\r\n\r\n    data.CursorPosition()\r\n\r\n    data.ImagePosition();\r\n\r\n    updateView()\r\n}\r\n\r\nfunction mouseup() {\r\n    data.CursorPosition['x'] = 0\r\n    data.CursorPosition['y'] = 0\r\n    \r\n    clearInterval( interval )\r\n    interval = undefined\r\n    updateView();\r\n}\r\n\r\nonDragDrop( Cursor, mousedown, mousemove, mouseup )\r\n\r\nconst img: HTMLImageElement = new Image()\r\n\r\nimg.onload = () => {\r\n    data.ImageWidth = img.naturalWidth \r\n    data.ImageHeight = img.naturalHeight;\r\n    data.ImageAspectRatio = data.ImageWidth / data.ImageHeight\r\n\r\n    let height = 300\r\n\r\n    if ( data.ImageAspectRatio > MAX_ASPECT_RATIO ) height = MAX_IMAGE_WIDTH / data.ImageAspectRatio\r\n\r\n    Img.style.height = `${ height }px`;\r\n    Img.style.width = `${ height * data.ImageAspectRatio }px`\r\n    \r\n    data.ImagePosition = compute(\r\n        {\r\n            x : ( Img.offsetWidth - ( Img.offsetWidth * SCALE ) ) * .5,\r\n            y : ( Img.offsetHeight - ( Img.offsetHeight * SCALE ) ) * .5\r\n        },\r\n        function () {\r\n            let x = this.x + absMax(data.Distance[\"x\"], 5) * -1\r\n            let y = this.y + absMax(data.Distance[\"y\"], 5) * -1\r\n\r\n            this.x = inRange( x, ( Img.offsetWidth * -5 ) + Img.offsetWidth, 0 )\r\n\r\n            this.y = inRange( y, ( Img.offsetHeight * -5 ) + Img.offsetHeight, 0 )\r\n        }\r\n    )\r\n\r\n    updateView()\r\n}\r\n\r\nimg.src = data.ImageSrc\r\n\r\nfunction createCanvas (): HTMLCanvasElement {\r\n    const canvas = document.createElement('canvas')\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    const aspectRatio = 2\r\n    canvas.width = Img.offsetWidth / aspectRatio;\r\n    canvas.height = Img.offsetHeight / aspectRatio;\r\n\r\n    const imgWidth = canvas.width * SCALE;\r\n    const imgHeight = canvas.height * SCALE;\r\n\r\n    let x = data.ImagePosition[\"x\"] / aspectRatio;\r\n    let y = data.ImagePosition[\"y\"] / aspectRatio;\r\n\r\n    context.drawImage(img, x, y, imgWidth, imgHeight);\r\n\r\n    return canvas\r\n}\r\n\r\nfunction createShot (): HTMLDivElement {\r\n    const Shot = document.createElement('div')\r\n    Shot.classList.add('shot')    \r\n    \r\n    // Childrens\r\n    const Canvas: HTMLCanvasElement = Shot.appendChild( createCanvas() )\r\n    \r\n    return Shot\r\n}\r\n\r\nButton.addEventListener('click', () => ShotsStack.appendChild( createShot() ))\r\n\r\nUploadBtn.addEventListener('click', () => {\r\n    InputFile.click()\r\n    InputFile.addEventListener('change', (e) => {\r\n        const image: File = InputFile.files[0]\r\n        const reader = new FileReader()\r\n\r\n        reader.addEventListener(\"load\", function () {\r\n            data.ImageSrc = this.result.toString()\r\n            img.src = this.result.toString()\r\n            updateView()\r\n        });\r\n\r\n        reader.readAsDataURL(image);\r\n\r\n        console.log(image)\r\n    })\r\n})"]}